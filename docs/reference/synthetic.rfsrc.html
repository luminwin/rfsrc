<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Synthetic Random Forests — synthetic • Fast Unified Random Forests with randomForestSRC</title><!-- favicons --><link rel="icon" type="image/png" sizes="48x48" href="../favicon-48x48.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Synthetic Random Forests — synthetic"><meta property="og:description" content="Grows a synthetic random forest (RF) using RF machines as synthetic
  features.  Applies only to regression and classification settings."><meta property="og:image" content="https://www.randomforestsrc.org/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-WZWXVK817Z"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-WZWXVK817Z');
</script></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Fast Unified Random Forests with randomForestSRC</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">3.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/getstarted.html">
    <span class="fas fa-home fa-lg"></span>

    Getting Started
  </a>
</li>
<li>
  <a href="../articles/installation.html">Installation</a>
</li>
<li>
  <a href="../cheatsheets.pdf">Cheatsheet</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Vignettes

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/parallel.html">Parallel Processing</a>
    </li>
    <li>
      <a href="../articles/hybrid.html">Hybrid Parallel Processing</a>
    </li>
    <li>
      <a href="../articles/algorithm.html">randomForestSRC Algorithm</a>
    </li>
    <li>
      <a href="../articles/speedup.html">Speedup Random Forest Analyses</a>
    </li>
    <li>
      <a href="../articles/forestWgt.html">Forest Weights, In-Bag (IB) and Out-of-Bag (OOB) Ensembles</a>
    </li>
    <li>
      <a href="../articles/survival.html">Random Survival Forests</a>
    </li>
    <li>
      <a href="../articles/competing.html">Competing Risks</a>
    </li>
    <li>
      <a href="../articles/imbalance.html">Random Forests Quantile Classifier (RFQ)</a>
    </li>
    <li>
      <a href="../articles/mvsplit.html">Multivariate Splitting Rule</a>
    </li>
    <li>
      <a href="../articles/aucsplit.html">AUC Splitting Rule for Multiclass Problems</a>
    </li>
    <li>
      <a href="../articles/sidClustering.html">sidClustering</a>
    </li>
    <li>
      <a href="../articles/rfsrc-subsample.html">Variable Importance (VIMP) with Subsampling Inference</a>
    </li>
    <li>
      <a href="../articles/minidep.html">Minimal Depth</a>
    </li>
    <li>
      <a href="../articles/partial.html">Partial Plots</a>
    </li>
  </ul></li>
<li>
  <a href="../reference/index.html">Manual</a>
</li>
<li>
  <a href="https://github.com/kogalur/randomForestSRC/issues" class="external-link">Bug Reporting</a>
</li>
<li>
  <a href="https://github.com/kogalur/randomForestSRC/discussions" class="external-link">Discussions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="https://kogalur.github.io/randomForestSRC/javadoc" class="external-link">Java API</a>
</li>
<li>
  <a href="https://github.com/kogalur/randomForestSRC/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

    GitHub
  </a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/kogalur/randomForestSRC/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

    GitHub
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Synthetic Random Forests</h1>

    <div class="hidden name"><code>synthetic.rfsrc.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Grows a synthetic random forest (RF) using RF machines as synthetic
  features.  Applies only to regression and classification settings.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">synthetic</span><span class="op">(</span><span class="va">formula</span>, <span class="va">data</span>, <span class="va">object</span>, <span class="va">newdata</span>,</span>
<span>  ntree <span class="op">=</span> <span class="fl">1000</span>, mtry <span class="op">=</span> <span class="cn">NULL</span>, nodesize <span class="op">=</span> <span class="fl">5</span>, nsplit <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  mtrySeq <span class="op">=</span> <span class="cn">NULL</span>, nodesizeSeq <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,<span class="fl">20</span>,<span class="fl">30</span>,<span class="fl">50</span>,<span class="fl">100</span><span class="op">)</span>,</span>
<span>  min.node <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  fast <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  use.org.features <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  na.action <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"na.omit"</span>, <span class="st">"na.impute"</span><span class="op">)</span>,</span>
<span>  oob <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<p></p>
<dl><dt id="arg-formula">formula<a class="anchor" aria-label="anchor" href="#arg-formula"></a></dt>
<dd><p>Model to be fit. Must be specified unless <code>object</code> is given.</p></dd>


  <dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>Data frame containing the y-outcome and x-variables in
    the model. Must be specified unless <code>object</code> is given.</p></dd>


  <dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>An object of class <code>(rfsrc, synthetic)</code>.
    Not required when <code>formula</code> and <code>data</code> are supplied.</p></dd>


  <dt id="arg-newdata">newdata<a class="anchor" aria-label="anchor" href="#arg-newdata"></a></dt>
<dd><p>Test data used for prediction (optional).</p></dd>


  <dt id="arg-ntree">ntree<a class="anchor" aria-label="anchor" href="#arg-ntree"></a></dt>
<dd><p>Number of trees.</p></dd>


  <dt id="arg-mtry">mtry<a class="anchor" aria-label="anchor" href="#arg-mtry"></a></dt>
<dd><p>mtry value for over-arching synthetic forest.</p></dd>


  <dt id="arg-nodesize">nodesize<a class="anchor" aria-label="anchor" href="#arg-nodesize"></a></dt>
<dd><p>Nodesize value for over-arching synthetic forest.</p></dd>


  <dt id="arg-nsplit">nsplit<a class="anchor" aria-label="anchor" href="#arg-nsplit"></a></dt>
<dd><p>nsplit-randomized splitting for significantly increased speed.</p></dd>


  <dt id="arg-mtryseq">mtrySeq<a class="anchor" aria-label="anchor" href="#arg-mtryseq"></a></dt>
<dd><p>Sequence of mtry values used for fitting the
    collection of RF machines.  If <code>NULL</code>, default is number of
    variables divided by 3, rounded up.</p></dd>


  <dt id="arg-nodesizeseq">nodesizeSeq<a class="anchor" aria-label="anchor" href="#arg-nodesizeseq"></a></dt>
<dd><p>Sequence of nodesize values used for the fitting the
    collection of RF machines.</p></dd>


  <dt id="arg-min-node">min.node<a class="anchor" aria-label="anchor" href="#arg-min-node"></a></dt>
<dd><p>Minimum forest averaged number of nodes a RF machine
    must exceed in order to be used as a synthetic feature.</p></dd>


  <dt id="arg-fast">fast<a class="anchor" aria-label="anchor" href="#arg-fast"></a></dt>
<dd><p>Use fast random forests, <code>rfsrc.fast</code>, in place of
    <code>rfsrc</code>?  Improves speed but may be less accurate.</p></dd>


  <dt id="arg-use-org-features">use.org.features<a class="anchor" aria-label="anchor" href="#arg-use-org-features"></a></dt>
<dd><p>In addition to synthetic features, should
    the original features be used when fitting synthetic forests?</p></dd>


  <dt id="arg-na-action">na.action<a class="anchor" aria-label="anchor" href="#arg-na-action"></a></dt>
<dd><p>Missing value action. The default <code>na.omit</code>
    removes the entire record if even one of its entries is <code>NA</code>.
    The action <code>na.impute</code> pre-imputes the data using fast
    imputation via <code class="command">impute.rfsrc</code>.</p></dd>


  <dt id="arg-oob">oob<a class="anchor" aria-label="anchor" href="#arg-oob"></a></dt>
<dd><p>Preserve "out-of-bagness" so that error rates and
    VIMP are honest?  Default is yes (<span class="option">oob=TRUE</span>).</p></dd>


  <dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Set to <code>TRUE</code> for verbose output.</p></dd>


  <dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Further arguments to be passed to the <code>rfsrc</code>
    function used for fitting the synthetic forest.</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>A collection of random forests are fit using different nodesize
  values.  The predicted values from these machines are then used as
  synthetic features (called RF machines) to fit a synthetic random
  forest (the original features are also used in constructing the
  synthetic forest).  Currently only implemented for regression and
  classification settings (univariate and multivariate).</p>
<p>Synthetic features are calculated using out-of-bag (OOB) data to avoid
  over-using training data.  However, to guarantee that performance
  values such as error rates and VIMP are honest, bootstrap draws are
  fixed across all trees used in the construction of the synthetic
  forest and its synthetic features.  The option <span class="option">oob=TRUE</span>
  ensures that this happens.  Change this option at your own peril.</p>
<p>If values for <code>mtrySeq</code> are given, RF machines are constructed
  for each combination of nodesize and mtry values specified by
  <code>nodesizeSeq</code> <code>mtrySeq</code>.</p>
    </div>
    <div id="value">
    <h2>Value</h2>
    <p>A list with the following components:</p>
<dl><dt>rfMachines</dt>
<dd><p>RF machines used to construct the synthetic
    features.</p></dd>

  <dt>rfSyn</dt>
<dd><p>The (grow) synthetic RF built over training data.</p></dd>

  <dt>rfSynPred</dt>
<dd><p>The predict synthetic RF built over test data (if available).</p></dd>

  <dt>synthetic</dt>
<dd><p>List containing the synthetic features.</p></dd>

  <dt>opt.machine</dt>
<dd><p>Optimal machine: RF machine with smallest
    OOB error rate.</p></dd>

</dl></div>
    <div id="author">
    <h2>Author</h2>
    <p>Hemant Ishwaran and Udaya B. Kogalur</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Ishwaran H. and Malley J.D. (2014).  Synthetic learning machines.
  <em>BioData Mining</em>, 7:28.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code class="command"><a href="rfsrc.html">rfsrc</a></code>,
  <code class="command"><a href="rfsrc.fast.html">rfsrc.fast</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># \donttest{</span></span>
<span><span class="co">## ------------------------------------------------------------</span></span>
<span><span class="co">## compare synthetic forests to regular forest (classification)</span></span>
<span><span class="co">## ------------------------------------------------------------</span></span>
<span></span>
<span><span class="co">## rfsrc and synthetic calls</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st">"mlbench"</span>, logical.return <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span></span>
<span>  <span class="co">## simulate the data </span></span>
<span>  <span class="va">ring</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/mlbench/man/mlbench.ringnorm.html" class="external-link">mlbench.ringnorm</a></span><span class="op">(</span><span class="fl">250</span>, <span class="fl">20</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co">## classification forests</span></span>
<span>  <span class="va">ringRF</span> <span class="op">&lt;-</span> <span class="fu"><a href="rfsrc.html">rfsrc</a></span><span class="op">(</span><span class="va">classes</span> <span class="op">~</span><span class="va">.</span>, <span class="va">ring</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co">## synthetic forests</span></span>
<span>  <span class="co">## 1 = nodesize varied</span></span>
<span>  <span class="co">## 2 = nodesize/mtry varied</span></span>
<span>  <span class="va">ringSyn1</span> <span class="op">&lt;-</span> <span class="fu">synthetic</span><span class="op">(</span><span class="va">classes</span> <span class="op">~</span><span class="va">.</span>, <span class="va">ring</span><span class="op">)</span></span>
<span>  <span class="va">ringSyn2</span> <span class="op">&lt;-</span> <span class="fu">synthetic</span><span class="op">(</span><span class="va">classes</span> <span class="op">~</span><span class="va">.</span>, <span class="va">ring</span>, mtrySeq <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">20</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co">## test-set performance</span></span>
<span>  <span class="va">ring.test</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/mlbench/man/mlbench.ringnorm.html" class="external-link">mlbench.ringnorm</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">20</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="va">pred.ringRF</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">ringRF</span>, newdata <span class="op">=</span> <span class="va">ring.test</span><span class="op">)</span></span>
<span>  <span class="va">pred.ringSyn1</span> <span class="op">&lt;-</span> <span class="fu">synthetic</span><span class="op">(</span>object <span class="op">=</span> <span class="va">ringSyn1</span>, newdata <span class="op">=</span> <span class="va">ring.test</span><span class="op">)</span><span class="op">$</span><span class="va">rfSynPred</span></span>
<span>  <span class="va">pred.ringSyn2</span> <span class="op">&lt;-</span> <span class="fu">synthetic</span><span class="op">(</span>object <span class="op">=</span> <span class="va">ringSyn2</span>, newdata <span class="op">=</span> <span class="va">ring.test</span><span class="op">)</span><span class="op">$</span><span class="va">rfSynPred</span></span>
<span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">pred.ringRF</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">pred.ringSyn1</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">pred.ringSyn2</span><span class="op">)</span></span>
<span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">## ------------------------------------------------------------</span></span>
<span><span class="co">## compare synthetic forest to regular forest (regression)</span></span>
<span><span class="co">## ------------------------------------------------------------</span></span>
<span></span>
<span><span class="co">## simulate the data</span></span>
<span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">250</span></span>
<span><span class="va">ntest</span> <span class="op">&lt;-</span> <span class="fl">1000</span></span>
<span><span class="va">N</span> <span class="op">&lt;-</span> <span class="va">n</span> <span class="op">+</span> <span class="va">ntest</span></span>
<span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fl">50</span></span>
<span><span class="va">std</span> <span class="op">&lt;-</span> <span class="fl">0.1</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">N</span> <span class="op">*</span> <span class="va">d</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="va">d</span><span class="op">)</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="op">*</span> <span class="op">(</span><span class="va">x</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="va">x</span><span class="op">[</span>,<span class="fl">4</span><span class="op">]</span><span class="op">^</span><span class="fl">3</span> <span class="op">+</span> <span class="va">x</span><span class="op">[</span>,<span class="fl">9</span><span class="op">]</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/Trig.html" class="external-link">sin</a></span><span class="op">(</span><span class="va">x</span><span class="op">[</span>,<span class="fl">12</span><span class="op">]</span><span class="op">*</span><span class="va">x</span><span class="op">[</span>,<span class="fl">18</span><span class="op">]</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span>, sd <span class="op">=</span> <span class="va">std</span><span class="op">)</span><span class="op">&gt;</span><span class="fl">.38</span><span class="op">)</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span><span class="op">)</span></span>
<span><span class="va">test</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">n</span><span class="op">+</span><span class="fl">1</span><span class="op">)</span><span class="op">:</span><span class="va">N</span></span>
<span></span>
<span><span class="co">## regression forests</span></span>
<span><span class="va">regF</span> <span class="op">&lt;-</span> <span class="fu"><a href="rfsrc.html">rfsrc</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">.</span>, <span class="va">dat</span><span class="op">[</span><span class="op">-</span><span class="va">test</span>, <span class="op">]</span>, <span class="op">)</span></span>
<span><span class="va">pred.regF</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">regF</span>, <span class="va">dat</span><span class="op">[</span><span class="va">test</span>, <span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## synthetic forests using fast rfsrc</span></span>
<span><span class="va">synF1</span> <span class="op">&lt;-</span> <span class="fu">synthetic</span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">.</span>, <span class="va">dat</span><span class="op">[</span><span class="op">-</span><span class="va">test</span>, <span class="op">]</span>, newdata <span class="op">=</span> <span class="va">dat</span><span class="op">[</span><span class="va">test</span>, <span class="op">]</span><span class="op">)</span></span>
<span><span class="va">synF2</span> <span class="op">&lt;-</span> <span class="fu">synthetic</span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">.</span>, <span class="va">dat</span><span class="op">[</span><span class="op">-</span><span class="va">test</span>, <span class="op">]</span>,</span>
<span>  newdata <span class="op">=</span> <span class="va">dat</span><span class="op">[</span><span class="va">test</span>, <span class="op">]</span>, mtrySeq <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">30</span>, <span class="fl">40</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## standardized MSE performance</span></span>
<span><span class="va">mse</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">pred.regF</span><span class="op">$</span><span class="va">err.rate</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>         <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">synF1</span><span class="op">$</span><span class="va">rfSynPred</span><span class="op">$</span><span class="va">err.rate</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>         <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">synF2</span><span class="op">$</span><span class="va">rfSynPred</span><span class="op">$</span><span class="va">err.rate</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">var</a></span><span class="op">(</span><span class="va">y</span><span class="op">[</span><span class="op">-</span><span class="va">test</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">mse</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"forest"</span>, <span class="st">"synthetic1"</span>, <span class="st">"synthetic2"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">mse</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## ------------------------------------------------------------</span></span>
<span><span class="co">## multivariate synthetic forests</span></span>
<span><span class="co">## ------------------------------------------------------------</span></span>
<span></span>
<span><span class="va">mtcars.new</span> <span class="op">&lt;-</span> <span class="va">mtcars</span></span>
<span><span class="va">mtcars.new</span><span class="op">$</span><span class="va">cyl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">mtcars.new</span><span class="op">$</span><span class="va">cyl</span><span class="op">)</span></span>
<span><span class="va">mtcars.new</span><span class="op">$</span><span class="va">carb</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">mtcars.new</span><span class="op">$</span><span class="va">carb</span>, ordered <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">trn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">mtcars.new</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">mtcars.new</span><span class="op">)</span><span class="op">/</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">mvSyn</span> <span class="op">&lt;-</span> <span class="fu">synthetic</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">carb</span>, <span class="va">mpg</span>, <span class="va">cyl</span><span class="op">)</span> <span class="op">~</span><span class="va">.</span>, <span class="va">mtcars.new</span><span class="op">[</span><span class="va">trn</span>,<span class="op">]</span><span class="op">)</span></span>
<span><span class="va">mvSyn.pred</span> <span class="op">&lt;-</span> <span class="fu">synthetic</span><span class="op">(</span>object <span class="op">=</span> <span class="va">mvSyn</span>, newdata <span class="op">=</span> <span class="va">mtcars.new</span><span class="op">[</span><span class="op">-</span><span class="va">trn</span>,<span class="op">]</span><span class="op">)</span></span>
<span><span class="co"># }</span></span></code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://www.luminwin.net" class="external-link">Min Lu</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>

