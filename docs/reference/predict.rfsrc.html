<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Prediction for Random Forests for Survival, Regression, and Classification — predict.rfsrc • Fast Unified Random Forests with randomForestSRC</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Prediction for Random Forests for Survival, Regression, and Classification — predict.rfsrc" />
<meta property="og:description" content="Obtain predicted values using a forest.  Also returns performance
  values if the test data contains y-outcomes." />
<meta property="og:image" content="https://www.randomforestsrc.org/logo.svg" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WZWXVK817Z"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-WZWXVK817Z');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Fast Unified Random Forests with randomForestSRC</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Development version">3.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/getstarted.html">
    <span class="fas fa-home fa-lg"></span>
     
    Getting Started
  </a>
</li>
<li>
  <a href="../articles/installation.html">Installation</a>
</li>
<li>
  <a href="../cheatsheets.pdf">Cheatsheet</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/parallel.html">Parallel Processing</a>
    </li>
    <li>
      <a href="../articles/hybrid.html">Hybrid Parallel Processing</a>
    </li>
    <li>
      <a href="../articles/algorithm.html">randomForestSRC Algorithm</a>
    </li>
    <li>
      <a href="../articles/speedup.html">Speedup Random Forest Analyses</a>
    </li>
    <li>
      <a href="../articles/forestWgt.html">Forest Weights, In-Bag (IB) and Out-of-Bag (OOB) Ensembles</a>
    </li>
    <li>
      <a href="../articles/survival.html">Random Survival Forests</a>
    </li>
    <li>
      <a href="../articles/competing.html">Competing Risks</a>
    </li>
    <li>
      <a href="../articles/imbalance.html">Random Forests Quantile Classifier (RFQ)</a>
    </li>
    <li>
      <a href="../articles/mvsplit.html">Multivariate Splitting Rule</a>
    </li>
    <li>
      <a href="../articles/sidClustering.html">sidClustering</a>
    </li>
    <li>
      <a href="../articles/rfsrc-subsample.html">Variable Importance (VIMP) with Subsampling Inference</a>
    </li>
    <li>
      <a href="../articles/minidep.html">Minimal Depth</a>
    </li>
    <li>
      <a href="../articles/partial.html">Partial Plots</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Manual</a>
</li>
<li>
  <a href="https://github.com/kogalur/randomForestSRC/issues">Bug Reporting</a>
</li>
<li>
  <a href="https://github.com/kogalur/randomForestSRC/discussions">Discussions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="https://kogalur.github.io/randomForestSRC/javadoc">Java API</a>
</li>
<li>
  <a href="https://github.com/kogalur/randomForestSRC/">
    <span class="fab fa-github fa-lg"></span>
     
    GitHub
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Prediction for Random Forests for Survival, Regression, and Classification</h1>
    
    <div class="hidden name"><code>predict.rfsrc.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Obtain predicted values using a forest.  Also returns performance
  values if the test data contains y-outcomes.</p>
    </div>

    <pre class="usage"><span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span><span class='va'>object</span>,
  <span class='va'>newdata</span>,
  m.target <span class='op'>=</span> <span class='cn'>NULL</span>,
  importance <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='cn'>FALSE</span>, <span class='cn'>TRUE</span>, <span class='st'>"none"</span>, <span class='st'>"anti"</span>, <span class='st'>"permute"</span>, <span class='st'>"random"</span><span class='op'>)</span>,
  get.tree <span class='op'>=</span> <span class='cn'>NULL</span>,
  block.size <span class='op'>=</span> <span class='kw'>if</span> <span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/sets.html'>is.element</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>importance</span><span class='op'>)</span>,
                     <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"none"</span>, <span class='st'>"FALSE"</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='cn'>NULL</span> <span class='kw'>else</span> <span class='fl'>10</span>,
  na.action <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"na.omit"</span>, <span class='st'>"na.impute"</span>, <span class='st'>"na.random"</span><span class='op'>)</span>,
  outcome <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"train"</span>, <span class='st'>"test"</span><span class='op'>)</span>,
  perf.type <span class='op'>=</span> <span class='cn'>NULL</span>,
  proximity <span class='op'>=</span> <span class='cn'>FALSE</span>,
  forest.wt <span class='op'>=</span> <span class='cn'>FALSE</span>,
  ptn.count <span class='op'>=</span> <span class='fl'>0</span>,
  distance <span class='op'>=</span> <span class='cn'>FALSE</span>,
  var.used <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='cn'>FALSE</span>, <span class='st'>"all.trees"</span>, <span class='st'>"by.tree"</span><span class='op'>)</span>,
  split.depth <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='cn'>FALSE</span>, <span class='st'>"all.trees"</span>, <span class='st'>"by.tree"</span><span class='op'>)</span>, seed <span class='op'>=</span> <span class='cn'>NULL</span>,
  do.trace <span class='op'>=</span> <span class='cn'>FALSE</span>, membership <span class='op'>=</span> <span class='cn'>FALSE</span>, statistics <span class='op'>=</span> <span class='cn'>FALSE</span>,
   
  <span class='va'>...</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>object</th>
      <td><p>An object of class <code>(rfsrc, grow)</code> or <code>(rfsrc,
	    forest)</code>.</p></td>
    </tr>
    <tr>
      <th>newdata</th>
      <td><p>Test data. If missing, the original grow (training)
    data is used.</p></td>
    </tr>
    <tr>
      <th>m.target</th>
      <td><p>Character vector for multivariate families
    specifying the target outcomes to be used. The default uses all
    coordinates.</p></td>
    </tr>
    <tr>
      <th>importance</th>
      <td><p>Method used for variable importance (VIMP).  Also
    see <code class='command'>vimp</code> for more flexibility, including joint vimp
    calculations.  See <code class='command'>holdoutvimp</code> for an alternate importance
    measure.</p></td>
    </tr>
    <tr>
      <th>get.tree</th>
      <td><p>Vector of integer(s) identifying trees over which the
    ensembles are calculated over.  By default, uses all trees in the
    forest.  As an example, the user can extract the ensemble, the VIMP
    , or proximity from a single tree (or several trees).  Note that
    <code>block.size</code> will be over-ridden so that it is no larger than
    the requested number of trees.  See example below illustrating how
    to extract VIMP for each tree.</p></td>
    </tr>
    <tr>
      <th>block.size</th>
      <td><p>Should the error rate be calculated on every tree?
    When <code>NULL</code>, it will only be calculated on the last tree.  To
    view the error rate on every nth tree, set the value to an integer
    between <code>1</code> and <code>ntree</code>.  If importance is requested, VIMP
    is calculated in "blocks" of size equal to <code>block.size</code>, thus
    resulting in a compromise between ensemble and permutation VIMP.</p></td>
    </tr>
    <tr>
      <th>na.action</th>
      <td><p>Missing value action. The default <code>na.omit</code>
    removes the entire record if any entry is <code>NA</code>.  
    Selecting <span class="option">na.random</span> uses fast random imputation, while
    <span class="option">na.impute</span> uses the imputation method described in
    <code class='command'>rfsrc</code>.</p></td>
    </tr>
    <tr>
      <th>outcome</th>
      <td><p>Determines whether the y-outcomes from the training
    data or the test data are used to calculate the predicted value.
    The default and natural choice is <code>train</code> which uses the
    original training data.  Option is ignored when <code>newdata</code> is
    missing as the training data is used for the test data in such
    settings.  The option is also ignored whenever the test data is
    devoid of y-outcomes.  See the details and examples below for more
    information.</p></td>
    </tr>
    <tr>
      <th>perf.type</th>
      <td><p>Optional character value for requesting metric used
    for predicted value, variable importance (VIMP) and error rate.  If not
    specified, values returned are calculated by the default action used
    for the family. Currently applicable only to classification and
    multivariate classification; allowed values are
    <code>perf.type="misclass"</code> (default), <code>perf.type="brier"</code> and
    <code>perf.type="gmean"</code>.</p></td>
    </tr>
    <tr>
      <th>proximity</th>
      <td><p>Should proximity between test observations
    be calculated?  Possible choices are <code>"inbag"</code>, <code>"oob"</code>,
    <code>"all"</code>, <code>TRUE</code>, or <code>FALSE</code> --- but some options may
    not be valid and will depend on the context of the predict call.
    The safest choice is <code>TRUE</code> if proximity is desired.</p></td>
    </tr>
    <tr>
      <th>distance</th>
      <td><p>Should distance between test observations
    be calculated?  Possible choices are <code>"inbag"</code>, <code>"oob"</code>,
    <code>"all"</code>, <code>TRUE</code>, or <code>FALSE</code> --- but some options may
    not be valid and will depend on the context of the predict call.
    The safest choice is <code>TRUE</code> if distance is desired.</p></td>
    </tr>
    <tr>
      <th>forest.wt</th>
      <td><p>Should the forest weight matrix for test observations
    be calculated?  Choices are the same as proximity.</p></td>
    </tr>
    <tr>
      <th>ptn.count</th>
      <td><p>The number of terminal nodes that each tree in the
    grow forest should be pruned back to.  The terminal node membership
    for the pruned forest is returned but no other action is taken.  The
    default is <code>ptn.count=0</code> which does no pruning.</p></td>
    </tr>
    <tr>
      <th>var.used</th>
      <td><p>Record the number of times a variable is split?</p></td>
    </tr>
    <tr>
      <th>split.depth</th>
      <td><p>Return minimal depth for each variable for each case?</p></td>
    </tr>
    <tr>
      <th>seed</th>
      <td><p>Negative integer specifying seed for the random number
    generator.</p></td>
    </tr>
    <tr>
      <th>do.trace</th>
      <td><p>Number of seconds between updates to the user on
    approximate time to completion.</p></td>
    </tr>
    <tr>
      <th>membership</th>
      <td><p>Should terminal node membership and inbag
    information be returned?</p></td>
    </tr>
    <tr>
      <th>statistics</th>
      <td><p>Should split statistics be returned?  Values can be
    parsed using <code class='command'>stat.split</code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Further arguments passed to or from other methods.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    

<p>Predicted values are obtained by "dropping" test data down the trained
  forest (forest calculated using training data).  Performance values are
  returned if test data contains y-outcome values.  Single as well as
  joint VIMP are also returned if requested.</p>  
<p>If no test data is provided, the original training data is used, and
  the code reverts to restore mode allowing the user to restore the
  original trained forest.  This feature allows extracting outputs from
  the forest not asked for in the original grow call.</p>  
<p>If <span class="option">outcome="test"</span>, the predictor is calculated by using
  y-outcomes from the test data (outcome information must be present).
  Terminal nodes from the trained forest are recalculated using y-outcomes
  from the test set.  This yields a modified predictor in which the
  topology of the forest is based solely on the training data, but where
  predicted values are obtained from test data.  Error rates and VIMP
  are calculated by bootstrapping the test data and using out-of-bagging
  to ensure unbiased estimates.</p>
<p><code>csv=TRUE</code> returns case specific VIMP;  <code>cse=TRUE</code> returns
  case specific error rates.  Applies to all families except survival.
  These options can also be applied while training.</p>
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of class <code>(rfsrc, predict)</code>, which is a list with the
  following components:</p>
<dt>call</dt><dd><p>The original grow call to <code class='command'>rfsrc</code>.</p></dd>
  <dt>family</dt><dd><p>The family used in the analysis.</p></dd>
  <dt>n</dt><dd><p>Sample size of test data (depends upon <code>NA</code> values).</p></dd>
  <dt>ntree</dt><dd><p>Number of trees in the grow forest.</p></dd>
  <dt>yvar</dt><dd><p>Test set y-outcomes or original grow y-outcomes if none.</p></dd>
  <dt>yvar.names</dt><dd><p>A character vector of the y-outcome names.</p></dd>
  <dt>xvar</dt><dd><p>Data frame of test set x-variables.</p></dd>
  <dt>xvar.names</dt><dd><p>A character vector of the x-variable names.</p></dd>
  <dt>leaf.count</dt><dd><p>Number of terminal nodes for each tree in the
    grow forest.  Vector of length <code>ntree</code>.</p></dd>
  <dt>proximity</dt><dd><p>Symmetric proximity matrix of the test data.</p></dd>
  <dt>forest</dt><dd><p>The grow forest.</p></dd>
  
                    
  
  <dt>membership</dt><dd><p>Matrix recording terminal node membership for the
    test data where each column contains the node number that a
    case falls in for that tree.</p></dd>
  <dt>inbag</dt><dd><p>Matrix recording inbag membership for the test data
    where each column contains the number of times that a case
    appears in the bootstrap sample for that tree.</p></dd>
  <dt>var.used</dt><dd><p>Count of the number of times a variable was used in
    growing the forest.</p></dd>
  <dt>imputed.indv</dt><dd><p>Vector of indices of records in test data with
    missing values.</p></dd>
  <dt>imputed.data</dt><dd><p>Data frame comprising imputed test data.  The first
    columns are the y-outcomes followed by the x-variables.</p></dd>
  <dt>split.depth</dt><dd><p>Matrix (i,j) or array (i,j,k) recording the
    minimal depth for variable j for case i, either averaged over
    the forest, or by tree k.</p></dd>
  <dt>node.stats</dt><dd><p>Split statistics returned when
    <code>statistics=TRUE</code> which can be parsed using <code class='command'>stat.split</code>.</p></dd>
  <dt>err.rate</dt><dd><p>Cumulative OOB error rate for the test data if
    y-outcomes are present.</p></dd>
  <dt>importance</dt><dd><p>Test set variable importance (VIMP).  Can be
    <code>NULL</code>.</p></dd>
  <dt>predicted</dt><dd><p>Test set predicted value.</p></dd>
  <dt>predicted.oob</dt><dd><p>OOB predicted value (<code>NULL</code> unless
    <span class="option">outcome="test"</span>).</p></dd>
  <dt>quantile</dt><dd><p>Quantile value at probabilities requested.</p></dd>
  <dt>quantile.oob</dt><dd><p>OOB quantile value at probabilities requested (<code>NULL</code> unless
    <span class="option">outcome="test"</span>).</p></dd>

  
  <dt>++++++++</dt><dd><p>for classification settings, additionally ++++++++</p></dd>      
  <dt>class</dt><dd><p>In-bag predicted class labels.</p></dd>
  <dt>class.oob</dt><dd><p>OOB predicted class labels (<code>NULL</code> unless <span class="option">outcome="test"</span>).</p></dd>
  
  <dt>++++++++</dt><dd><p>for multivariate settings, additionally ++++++++</p></dd> 
  
  <dt>regrOutput</dt><dd><p>List containing performance values for
	  test multivariate regression responses (applies only in
	  multivariate settings).</p></dd>
	<dt>clasOutput</dt><dd><p>List containing performance values for
	  test multivariate categorical (factor) responses (applies only in
	  multivariate settings).</p></dd>
  
  <dt>++++++++</dt><dd><p>for survival settings, additionally ++++++++</p></dd> 
  
  <dt>chf</dt><dd><p>Cumulative hazard function (CHF).</p></dd>
  <dt>chf.oob</dt><dd><p>OOB CHF (<code>NULL</code> unless <span class="option">outcome="test"</span>).</p></dd>
  <dt>survival</dt><dd><p>Survival function.</p></dd>
  <dt>survival.oob</dt><dd><p>OOB survival function (<code>NULL</code> unless <span class="option">outcome="test"</span>).</p></dd>
  <dt>time.interest</dt><dd><p>Ordered unique death times.</p></dd>
  <dt>ndead</dt><dd><p>Number of deaths.</p></dd>
  
  <dt>++++++++</dt><dd><p>for competing risks, additionally ++++++++</p></dd> 
  
  <dt>chf</dt><dd><p>Cause-specific cumulative hazard function (CSCHF)
    for each event.</p></dd>
  <dt>chf.oob</dt><dd><p>OOB CSCHF for each event (<code>NULL</code> unless <span class="option">outcome="test"</span>).</p></dd>
  <dt>cif</dt><dd><p>Cumulative incidence function (CIF) for each event.</p></dd>
  <dt>cif.oob</dt><dd><p>OOB CIF for each event (<code>NULL</code> unless <span class="option">outcome="test"</span>).</p></dd>
  <dt>time.interest</dt><dd><p>Ordered unique event times.</p></dd>
  <dt>ndead</dt><dd><p>Number of events.</p></dd>

    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    

<p>The dimensions and values of returned objects depend heavily on the
  underlying family and whether y-outcomes are present in the test data.
  In particular, items related to performance will be <code>NULL</code> when
  y-outcomes are not present.  For multivariate families, predicted
  values, VIMP, error rate, and performance values are stored in the
  lists <code>regrOutput</code> and <code>clasOutput</code> which can be extracted
  using functions <code>get.mv.error</code>, <code>get.mv.predicted</code> and
  <code>get.mv.vimp</code>.</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Hemant Ishwaran and Udaya B. Kogalur</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Breiman L. (2001). Random forests, <em>Machine Learning</em>, 45:5-32.</p>  
<p>Ishwaran H., Kogalur U.B., Blackstone E.H. and Lauer M.S.
  (2008).  Random survival forests, <em>Ann. App.
    Statist.</em>, 2:841-860.</p>  
<p>Ishwaran H. and Kogalur U.B. (2007).  Random survival forests for R,
  <em>Rnews</em>, 7(2):25-31.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code class='command'><a href='holdout.vimp.rfsrc.html'>holdout.vimp.rfsrc</a></code>,
  <code class='command'><a href='plot.competing.risk.rfsrc.html'>plot.competing.risk.rfsrc</a></code>,
  <code class='command'><a href='plot.rfsrc.html'>plot.rfsrc</a></code>,
  <code class='command'><a href='plot.survival.rfsrc.html'>plot.survival.rfsrc</a></code>,
  <code class='command'><a href='plot.variable.rfsrc.html'>plot.variable.rfsrc</a></code>,
  <code class='command'><a href='rfsrc.html'>rfsrc</a></code>,
  <code class='command'><a href='rfsrc.fast.html'>rfsrc.fast</a></code>,
  <code class='command'><a href='stat.split.rfsrc.html'>stat.split.rfsrc</a></code>,
  <code class='command'><a href='synthetic.html'>synthetic.rfsrc</a></code>,
  <code class='command'><a href='vimp.rfsrc.html'>vimp.rfsrc</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'>## ------------------------------------------------------------</span>
<span class='co'>## typical train/testing scenario</span>
<span class='co'>## ------------------------------------------------------------</span>

<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>veteran</span>, package <span class='op'>=</span> <span class='st'>"randomForestSRC"</span><span class='op'>)</span>
<span class='va'>train</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>veteran</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/Round.html'>round</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>veteran</span><span class='op'>)</span> <span class='op'>*</span> <span class='fl'>0.80</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>veteran.grow</span> <span class='op'>&lt;-</span> <span class='fu'><a href='rfsrc.html'>rfsrc</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/pkg/survival/man/Surv.html'>Surv</a></span><span class='op'>(</span><span class='va'>time</span>, <span class='va'>status</span><span class='op'>)</span> <span class='op'>~</span> <span class='va'>.</span>, <span class='va'>veteran</span><span class='op'>[</span><span class='va'>train</span>, <span class='op'>]</span>, ntree <span class='op'>=</span> <span class='fl'>100</span><span class='op'>)</span> 
<span class='va'>veteran.pred</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span><span class='va'>veteran.grow</span>, <span class='va'>veteran</span><span class='op'>[</span><span class='op'>-</span><span class='va'>train</span>, <span class='op'>]</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>veteran.grow</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>veteran.pred</span><span class='op'>)</span>

<span class='co'># \donttest{</span>
<span class='co'>## ------------------------------------------------------------</span>
<span class='co'>## restore mode</span>
<span class='co'>## - if predict is called without specifying the test data</span>
<span class='co'>##   the original training data is used and the forest is restored</span>
<span class='co'>## ------------------------------------------------------------</span>

<span class='co'>## first train the forest</span>
<span class='va'>airq.obj</span> <span class='op'>&lt;-</span> <span class='fu'><a href='rfsrc.html'>rfsrc</a></span><span class='op'>(</span><span class='va'>Ozone</span> <span class='op'>~</span> <span class='va'>.</span>, data <span class='op'>=</span> <span class='va'>airquality</span><span class='op'>)</span>

<span class='co'>## now we restore it and compare it to the original call</span>
<span class='co'>## they are identical</span>
<span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span><span class='va'>airq.obj</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>airq.obj</span><span class='op'>)</span>

<span class='co'>## we can retrieve various outputs that were not asked for in</span>
<span class='co'>## in the original call</span>

<span class='co'>## here we extract the proximity matrix</span>
<span class='va'>prox</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span><span class='va'>airq.obj</span>, proximity <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>$</span><span class='va'>proximity</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>prox</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>10</span>,<span class='fl'>1</span><span class='op'>:</span><span class='fl'>10</span><span class='op'>]</span><span class='op'>)</span>

<span class='co'>## here we extract the number of times a variable was used to grow</span>
<span class='co'>## the grow forest</span>
<span class='va'>var.used</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span><span class='va'>airq.obj</span>, var.used <span class='op'>=</span> <span class='st'>"by.tree"</span><span class='op'>)</span><span class='op'>$</span><span class='va'>var.used</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>var.used</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'>## ------------------------------------------------------------</span>
<span class='co'>## prediction when test data has missing values</span>
<span class='co'>## ------------------------------------------------------------</span>

<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>pbc</span>, package <span class='op'>=</span> <span class='st'>"randomForestSRC"</span><span class='op'>)</span>
<span class='va'>trn</span> <span class='op'>&lt;-</span> <span class='va'>pbc</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>312</span>,<span class='op'>]</span>
<span class='va'>tst</span> <span class='op'>&lt;-</span> <span class='va'>pbc</span><span class='op'>[</span><span class='op'>-</span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>312</span><span class='op'>)</span>,<span class='op'>]</span>
<span class='va'>o</span> <span class='op'>&lt;-</span> <span class='fu'><a href='rfsrc.html'>rfsrc</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/pkg/survival/man/Surv.html'>Surv</a></span><span class='op'>(</span><span class='va'>days</span>, <span class='va'>status</span><span class='op'>)</span> <span class='op'>~</span> <span class='va'>.</span>, <span class='va'>trn</span><span class='op'>)</span>

<span class='co'>## default imputation method used by rfsrc</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span><span class='va'>o</span>, <span class='va'>tst</span>, na.action <span class='op'>=</span> <span class='st'>"na.impute"</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'>## random imputation</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span><span class='va'>o</span>, <span class='va'>tst</span>, na.action <span class='op'>=</span> <span class='st'>"na.random"</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'>## ------------------------------------------------------------</span>
<span class='co'>## requesting different performance for classification</span>
<span class='co'>## ------------------------------------------------------------</span>

<span class='co'>## default performance is misclassification</span>
<span class='va'>o</span> <span class='op'>&lt;-</span> <span class='fu'><a href='rfsrc.html'>rfsrc</a></span><span class='op'>(</span><span class='va'>Species</span><span class='op'>~</span><span class='va'>.</span>, <span class='va'>iris</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>o</span><span class='op'>)</span>

<span class='co'>## get (normalized) brier performance</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span><span class='va'>o</span>, perf.type <span class='op'>=</span> <span class='st'>"brier"</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'>## ------------------------------------------------------------</span>
<span class='co'>## vimp for each tree: illustrates get.tree </span>
<span class='co'>## ------------------------------------------------------------</span>

<span class='co'>## regression analysis but no VIMP</span>
<span class='va'>o</span> <span class='op'>&lt;-</span> <span class='fu'><a href='rfsrc.html'>rfsrc</a></span><span class='op'>(</span><span class='va'>mpg</span><span class='op'>~</span><span class='va'>.</span>, <span class='va'>mtcars</span><span class='op'>)</span>

<span class='co'>## now extract VIMP for each tree using get.tree</span>
<span class='va'>vimp.tree</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/do.call.html'>do.call</a></span><span class='op'>(</span><span class='va'>rbind</span>, <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='va'>o</span><span class='op'>$</span><span class='va'>ntree</span>, <span class='kw'>function</span><span class='op'>(</span><span class='va'>b</span><span class='op'>)</span> <span class='op'>{</span>
     <span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span><span class='va'>o</span>, get.tree <span class='op'>=</span> <span class='va'>b</span>, importance <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>$</span><span class='va'>importance</span>
<span class='op'>}</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'>## boxplot of tree VIMP</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/boxplot.html'>boxplot</a></span><span class='op'>(</span><span class='va'>vimp.tree</span>, outline <span class='op'>=</span> <span class='cn'>FALSE</span>, col <span class='op'>=</span> <span class='st'>"cyan"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/abline.html'>abline</a></span><span class='op'>(</span>h <span class='op'>=</span> <span class='fl'>0</span>, lty <span class='op'>=</span> <span class='fl'>2</span>, col <span class='op'>=</span> <span class='st'>"red"</span><span class='op'>)</span>

<span class='co'>## summary information of tree VIMP</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>vimp.tree</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'>## extract tree-averaged VIMP using importance=TRUE</span>
<span class='co'>## remember to set block.size to 1</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span><span class='va'>o</span>, importance <span class='op'>=</span> <span class='cn'>TRUE</span>, block.size <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span><span class='op'>$</span><span class='va'>importance</span><span class='op'>)</span>

<span class='co'>## use direct call to vimp() for tree-averaged VIMP</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='fu'><a href='vimp.rfsrc.html'>vimp</a></span><span class='op'>(</span><span class='va'>o</span>, block.size <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span><span class='op'>$</span><span class='va'>importance</span><span class='op'>)</span>

<span class='co'>## ------------------------------------------------------------</span>
<span class='co'>## vimp for just a few trees</span>
<span class='co'>## illustrates how to get vimp if you have a large data set</span>
<span class='co'>## ------------------------------------------------------------</span>

<span class='co'>## survival analysis but no VIMP</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>pbc</span>, package <span class='op'>=</span> <span class='st'>"randomForestSRC"</span><span class='op'>)</span>
<span class='va'>o</span> <span class='op'>&lt;-</span> <span class='fu'><a href='rfsrc.html'>rfsrc</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/pkg/survival/man/Surv.html'>Surv</a></span><span class='op'>(</span><span class='va'>days</span>, <span class='va'>status</span><span class='op'>)</span> <span class='op'>~</span> <span class='va'>.</span>, <span class='va'>pbc</span>, ntree <span class='op'>=</span> <span class='fl'>2000</span><span class='op'>)</span>

<span class='co'>## get vimp for a small number of trees</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span><span class='va'>o</span>, get.tree<span class='op'>=</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>250</span>, importance <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>$</span><span class='va'>importance</span><span class='op'>)</span>


<span class='co'>## ------------------------------------------------------------</span>
<span class='co'>## case-specific vimp</span>
<span class='co'>## returns VIMP for each case</span>
<span class='co'>## ------------------------------------------------------------</span>

<span class='va'>o</span> <span class='op'>&lt;-</span> <span class='fu'><a href='rfsrc.html'>rfsrc</a></span><span class='op'>(</span><span class='va'>mpg</span><span class='op'>~</span><span class='va'>.</span>, <span class='va'>mtcars</span><span class='op'>)</span>
<span class='va'>op</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span><span class='va'>o</span>, importance <span class='op'>=</span> <span class='cn'>TRUE</span>, csv <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='va'>csvimp</span> <span class='op'>&lt;-</span> <span class='fu'><a href='rfsrc.html'>get.mv.csvimp</a></span><span class='op'>(</span><span class='va'>op</span>, standardize<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>csvimp</span><span class='op'>)</span>

<span class='co'>## ------------------------------------------------------------</span>
<span class='co'>## case-specific error rate</span>
<span class='co'>## returns tree-averaged error rate for each case</span>
<span class='co'>## ------------------------------------------------------------</span>

<span class='va'>o</span> <span class='op'>&lt;-</span> <span class='fu'><a href='rfsrc.html'>rfsrc</a></span><span class='op'>(</span><span class='va'>mpg</span><span class='op'>~</span><span class='va'>.</span>, <span class='va'>mtcars</span><span class='op'>)</span>
<span class='va'>op</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span><span class='va'>o</span>, importance <span class='op'>=</span> <span class='cn'>TRUE</span>, cse <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='va'>cserror</span> <span class='op'>&lt;-</span> <span class='fu'><a href='rfsrc.html'>get.mv.cserror</a></span><span class='op'>(</span><span class='va'>op</span>, standardize<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>cserror</span><span class='op'>)</span>


<span class='co'>## ------------------------------------------------------------</span>
<span class='co'>## predicted probability and predicted class labels are returned</span>
<span class='co'>## in the predict object for classification analyses</span>
<span class='co'>## ------------------------------------------------------------</span>

<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>breast</span>, package <span class='op'>=</span> <span class='st'>"randomForestSRC"</span><span class='op'>)</span>
<span class='va'>breast.obj</span> <span class='op'>&lt;-</span> <span class='fu'><a href='rfsrc.html'>rfsrc</a></span><span class='op'>(</span><span class='va'>status</span> <span class='op'>~</span> <span class='va'>.</span>, data <span class='op'>=</span> <span class='va'>breast</span><span class='op'>[</span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>100</span><span class='op'>)</span>, <span class='op'>]</span><span class='op'>)</span>
<span class='va'>breast.pred</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span><span class='va'>breast.obj</span>, <span class='va'>breast</span><span class='op'>[</span><span class='op'>-</span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>100</span><span class='op'>)</span>, <span class='op'>]</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>breast.pred</span><span class='op'>$</span><span class='va'>predicted</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>breast.pred</span><span class='op'>$</span><span class='va'>class</span><span class='op'>)</span>


<span class='co'>## ------------------------------------------------------------</span>
<span class='co'>## unique feature of randomForestSRC</span>
<span class='co'>## cross-validation can be used when factor labels differ over</span>
<span class='co'>## training and test data</span>
<span class='co'>## ------------------------------------------------------------</span>

<span class='co'>## first we convert all x-variables to factors</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>veteran</span>, package <span class='op'>=</span> <span class='st'>"randomForestSRC"</span><span class='op'>)</span>
<span class='va'>veteran2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span><span class='op'>(</span><span class='va'>veteran</span>, <span class='va'>factor</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>veteran2</span><span class='op'>$</span><span class='va'>time</span> <span class='op'>&lt;-</span> <span class='va'>veteran</span><span class='op'>$</span><span class='va'>time</span>
<span class='va'>veteran2</span><span class='op'>$</span><span class='va'>status</span> <span class='op'>&lt;-</span> <span class='va'>veteran</span><span class='op'>$</span><span class='va'>status</span>

<span class='co'>## split the data into unbalanced train/test data (25/75)</span>
<span class='co'>## the train/test data have the same levels, but different labels</span>
<span class='va'>train</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>veteran2</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/Round.html'>round</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>veteran2</span><span class='op'>)</span> <span class='op'>*</span> <span class='fl'>.25</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>veteran2</span><span class='op'>[</span><span class='va'>train</span>,<span class='op'>]</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>veteran2</span><span class='op'>[</span><span class='op'>-</span><span class='va'>train</span>,<span class='op'>]</span><span class='op'>)</span>

<span class='co'>## train the forest and use this to predict on test data</span>
<span class='va'>o.grow</span> <span class='op'>&lt;-</span> <span class='fu'><a href='rfsrc.html'>rfsrc</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/pkg/survival/man/Surv.html'>Surv</a></span><span class='op'>(</span><span class='va'>time</span>, <span class='va'>status</span><span class='op'>)</span> <span class='op'>~</span> <span class='va'>.</span>, <span class='va'>veteran2</span><span class='op'>[</span><span class='va'>train</span>, <span class='op'>]</span><span class='op'>)</span> 
<span class='va'>o.pred</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span><span class='va'>o.grow</span>, <span class='va'>veteran2</span><span class='op'>[</span><span class='op'>-</span><span class='va'>train</span> , <span class='op'>]</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>o.grow</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>o.pred</span><span class='op'>)</span>

<span class='co'>## even harder ... factor level not previously encountered in training</span>
<span class='va'>veteran3</span> <span class='op'>&lt;-</span> <span class='va'>veteran2</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span>, <span class='op'>]</span>
<span class='va'>veteran3</span><span class='op'>$</span><span class='va'>celltype</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"newlevel"</span>, <span class='st'>"1"</span>, <span class='st'>"3"</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>o2.pred</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span><span class='va'>o.grow</span>, <span class='va'>veteran3</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>o2.pred</span><span class='op'>)</span>
<span class='co'>## the unusual level is treated like a missing value but is not removed</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>o2.pred</span><span class='op'>$</span><span class='va'>xvar</span><span class='op'>)</span>

<span class='co'>## ------------------------------------------------------------</span>
<span class='co'>## example illustrating the flexibility of outcome = "test"</span>
<span class='co'>## illustrates restoration of forest via outcome = "test"</span>
<span class='co'>## ------------------------------------------------------------</span>

<span class='co'>## first we train the forest</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>pbc</span>, package <span class='op'>=</span> <span class='st'>"randomForestSRC"</span><span class='op'>)</span>
<span class='va'>pbc.grow</span> <span class='op'>&lt;-</span> <span class='fu'><a href='rfsrc.html'>rfsrc</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/pkg/survival/man/Surv.html'>Surv</a></span><span class='op'>(</span><span class='va'>days</span>, <span class='va'>status</span><span class='op'>)</span> <span class='op'>~</span> <span class='va'>.</span>, <span class='va'>pbc</span><span class='op'>)</span>

<span class='co'>## use predict with outcome = TEST</span>
<span class='va'>pbc.pred</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span><span class='va'>pbc.grow</span>, <span class='va'>pbc</span>, outcome <span class='op'>=</span> <span class='st'>"test"</span><span class='op'>)</span>

<span class='co'>## notice that error rates are the same!!</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>pbc.grow</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>pbc.pred</span><span class='op'>)</span>

<span class='co'>## note this is equivalent to restoring the forest</span>
<span class='va'>pbc.pred2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span><span class='va'>pbc.grow</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>pbc.grow</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>pbc.pred</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>pbc.pred2</span><span class='op'>)</span>

<span class='co'>## similar example, but with na.action = "na.impute"</span>
<span class='va'>airq.obj</span> <span class='op'>&lt;-</span> <span class='fu'><a href='rfsrc.html'>rfsrc</a></span><span class='op'>(</span><span class='va'>Ozone</span> <span class='op'>~</span> <span class='va'>.</span>, data <span class='op'>=</span> <span class='va'>airquality</span>, na.action <span class='op'>=</span> <span class='st'>"na.impute"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>airq.obj</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span><span class='va'>airq.obj</span><span class='op'>)</span><span class='op'>)</span>
<span class='co'>## ... also equivalent to outcome="test" but na.action = "na.impute" required</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span><span class='va'>airq.obj</span>, <span class='va'>airquality</span>, outcome <span class='op'>=</span> <span class='st'>"test"</span>, na.action <span class='op'>=</span> <span class='st'>"na.impute"</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'>## classification example</span>
<span class='va'>iris.obj</span> <span class='op'>&lt;-</span> <span class='fu'><a href='rfsrc.html'>rfsrc</a></span><span class='op'>(</span><span class='va'>Species</span> <span class='op'>~</span><span class='va'>.</span>, data <span class='op'>=</span> <span class='va'>iris</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>iris.obj</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='fu'>predict.rfsrc</span><span class='op'>(</span><span class='va'>iris.obj</span>, <span class='va'>iris</span>, outcome <span class='op'>=</span> <span class='st'>"test"</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'>## ------------------------------------------------------------</span>
<span class='co'>## another example illustrating outcome = "test"</span>
<span class='co'>## unique way to check reproducibility of the forest</span>
<span class='co'>## ------------------------------------------------------------</span>

<span class='co'>## training step</span>
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>542899</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>pbc</span>, package <span class='op'>=</span> <span class='st'>"randomForestSRC"</span><span class='op'>)</span>
<span class='va'>train</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>pbc</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/Round.html'>round</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>pbc</span><span class='op'>)</span> <span class='op'>*</span> <span class='fl'>0.50</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>pbc.out</span> <span class='op'>&lt;-</span> <span class='fu'><a href='rfsrc.html'>rfsrc</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/pkg/survival/man/Surv.html'>Surv</a></span><span class='op'>(</span><span class='va'>days</span>, <span class='va'>status</span><span class='op'>)</span> <span class='op'>~</span> <span class='va'>.</span>,  data<span class='op'>=</span><span class='va'>pbc</span><span class='op'>[</span><span class='va'>train</span>, <span class='op'>]</span><span class='op'>)</span>

<span class='co'>## standard prediction call</span>
<span class='va'>pbc.train</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span><span class='va'>pbc.out</span>, <span class='va'>pbc</span><span class='op'>[</span><span class='op'>-</span><span class='va'>train</span>, <span class='op'>]</span>, outcome <span class='op'>=</span> <span class='st'>"train"</span><span class='op'>)</span>
<span class='co'>##non-standard predict call: overlays the test data on the grow forest</span>
<span class='va'>pbc.test</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span><span class='va'>pbc.out</span>, <span class='va'>pbc</span><span class='op'>[</span><span class='op'>-</span><span class='va'>train</span>, <span class='op'>]</span>, outcome <span class='op'>=</span> <span class='st'>"test"</span><span class='op'>)</span>

<span class='co'>## check forest reproducibilility by comparing "test" predicted survival</span>
<span class='co'>## curves to "train" predicted survival curves for the first 3 individuals</span>
<span class='va'>Time</span> <span class='op'>&lt;-</span> <span class='va'>pbc.out</span><span class='op'>$</span><span class='va'>time.interest</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/matplot.html'>matplot</a></span><span class='op'>(</span><span class='va'>Time</span>, <span class='fu'><a href='https://rdrr.io/r/base/t.html'>t</a></span><span class='op'>(</span><span class='va'>pbc.train</span><span class='op'>$</span><span class='va'>survival</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span>,<span class='op'>]</span><span class='op'>)</span>, ylab <span class='op'>=</span> <span class='st'>"Survival"</span>, col <span class='op'>=</span> <span class='fl'>1</span>, type <span class='op'>=</span> <span class='st'>"l"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/matplot.html'>matlines</a></span><span class='op'>(</span><span class='va'>Time</span>, <span class='fu'><a href='https://rdrr.io/r/base/t.html'>t</a></span><span class='op'>(</span><span class='va'>pbc.test</span><span class='op'>$</span><span class='va'>survival</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span>,<span class='op'>]</span><span class='op'>)</span>, col <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span>

<span class='co'>## ------------------------------------------------------------</span>
<span class='co'>## ... just for _fun_ ...</span>
<span class='co'>## survival analysis using mixed multivariate outcome analysis </span>
<span class='co'>## compare the predicted value to RSF</span>
<span class='co'>## ------------------------------------------------------------</span>

<span class='co'>## train survival forest using pbc data</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>pbc</span>, package <span class='op'>=</span> <span class='st'>"randomForestSRC"</span><span class='op'>)</span>
<span class='va'>rsf.obj</span> <span class='op'>&lt;-</span> <span class='fu'><a href='rfsrc.html'>rfsrc</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/pkg/survival/man/Surv.html'>Surv</a></span><span class='op'>(</span><span class='va'>days</span>, <span class='va'>status</span><span class='op'>)</span> <span class='op'>~</span> <span class='va'>.</span>, <span class='va'>pbc</span><span class='op'>)</span>
<span class='va'>yvar</span> <span class='op'>&lt;-</span> <span class='va'>rsf.obj</span><span class='op'>$</span><span class='va'>yvar</span>

<span class='co'>## fit a mixed outcome forest using days and status as y-variables</span>
<span class='va'>pbc.mod</span> <span class='op'>&lt;-</span> <span class='va'>pbc</span>
<span class='va'>pbc.mod</span><span class='op'>$</span><span class='va'>status</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>pbc.mod</span><span class='op'>$</span><span class='va'>status</span><span class='op'>)</span>
<span class='va'>mix.obj</span> <span class='op'>&lt;-</span> <span class='fu'><a href='rfsrc.html'>rfsrc</a></span><span class='op'>(</span><span class='fu'>Multivar</span><span class='op'>(</span><span class='va'>days</span>, <span class='va'>status</span><span class='op'>)</span> <span class='op'>~</span><span class='va'>.</span>, <span class='va'>pbc.mod</span><span class='op'>)</span>

<span class='co'>## compare oob predicted values</span>
<span class='va'>rsf.pred</span> <span class='op'>&lt;-</span> <span class='va'>rsf.obj</span><span class='op'>$</span><span class='va'>predicted.oob</span>
<span class='va'>mix.pred</span> <span class='op'>&lt;-</span> <span class='va'>mix.obj</span><span class='op'>$</span><span class='va'>regrOutput</span><span class='op'>$</span><span class='va'>days</span><span class='op'>$</span><span class='va'>predicted.oob</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.html'>plot</a></span><span class='op'>(</span><span class='va'>rsf.pred</span>, <span class='va'>mix.pred</span><span class='op'>)</span>

<span class='co'>## compare C-index error rate</span>
<span class='va'>rsf.err</span> <span class='op'>&lt;-</span> <span class='fu'><a href='rfsrc.html'>get.cindex</a></span><span class='op'>(</span><span class='va'>yvar</span><span class='op'>$</span><span class='va'>days</span>, <span class='va'>yvar</span><span class='op'>$</span><span class='va'>status</span>, <span class='va'>rsf.pred</span><span class='op'>)</span>
<span class='va'>mix.err</span> <span class='op'>&lt;-</span> <span class='fl'>1</span> <span class='op'>-</span> <span class='fu'><a href='rfsrc.html'>get.cindex</a></span><span class='op'>(</span><span class='va'>yvar</span><span class='op'>$</span><span class='va'>days</span>, <span class='va'>yvar</span><span class='op'>$</span><span class='va'>status</span>, <span class='va'>mix.pred</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/cat.html'>cat</a></span><span class='op'>(</span><span class='st'>"RSF                :"</span>, <span class='va'>rsf.err</span>, <span class='st'>"\n"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/cat.html'>cat</a></span><span class='op'>(</span><span class='st'>"multivariate forest:"</span>, <span class='va'>mix.err</span>, <span class='st'>"\n"</span><span class='op'>)</span>

<span class='co'># }</span>
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://www.luminwin.net'>Min Lu</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


