<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Acquire Maximal Subtree Information — max.subtree.rfsrc • Fast Unified Random Forests with randomForestSRC</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Acquire Maximal Subtree Information — max.subtree.rfsrc"><meta property="og:description" content="Extract maximal subtree information from a RF-SRC object.  Used for
    variable selection and identifying interactions between variables."><meta property="og:image" content="https://www.randomforestsrc.org/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-WZWXVK817Z"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-WZWXVK817Z');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Fast Unified Random Forests with randomForestSRC</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">3.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/getstarted.html">
    <span class="fas fa-home fa-lg"></span>
     
    Getting Started
  </a>
</li>
<li>
  <a href="../articles/installation.html">Installation</a>
</li>
<li>
  <a href="../cheatsheets.pdf">Cheatsheet</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/parallel.html">Parallel Processing</a>
    </li>
    <li>
      <a href="../articles/hybrid.html">Hybrid Parallel Processing</a>
    </li>
    <li>
      <a href="../articles/algorithm.html">randomForestSRC Algorithm</a>
    </li>
    <li>
      <a href="../articles/speedup.html">Speedup Random Forest Analyses</a>
    </li>
    <li>
      <a href="../articles/forestWgt.html">Forest Weights, In-Bag (IB) and Out-of-Bag (OOB) Ensembles</a>
    </li>
    <li>
      <a href="../articles/survival.html">Random Survival Forests</a>
    </li>
    <li>
      <a href="../articles/competing.html">Competing Risks</a>
    </li>
    <li>
      <a href="../articles/imbalance.html">Random Forests Quantile Classifier (RFQ)</a>
    </li>
    <li>
      <a href="../articles/mvsplit.html">Multivariate Splitting Rule</a>
    </li>
    <li>
      <a href="../articles/aucsplit.html">AUC Splitting Rule for Multiclass Problems</a>
    </li>
    <li>
      <a href="../articles/sidClustering.html">sidClustering</a>
    </li>
    <li>
      <a href="../articles/rfsrc-subsample.html">Variable Importance (VIMP) with Subsampling Inference</a>
    </li>
    <li>
      <a href="../articles/minidep.html">Minimal Depth</a>
    </li>
    <li>
      <a href="../articles/partial.html">Partial Plots</a>
    </li>
  </ul></li>
<li>
  <a href="../reference/index.html">Manual</a>
</li>
<li>
  <a href="https://github.com/kogalur/randomForestSRC/issues" class="external-link">Bug Reporting</a>
</li>
<li>
  <a href="https://github.com/kogalur/randomForestSRC/discussions" class="external-link">Discussions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="https://kogalur.github.io/randomForestSRC/javadoc" class="external-link">Java API</a>
</li>
<li>
  <a href="https://github.com/kogalur/randomForestSRC/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
    GitHub
  </a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/kogalur/randomForestSRC/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
    GitHub
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Acquire Maximal Subtree Information</h1>
    
    <div class="hidden name"><code>max.subtree.rfsrc.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Extract maximal subtree information from a RF-SRC object.  Used for
    variable selection and identifying interactions between variables.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">max.subtree</span><span class="op">(</span><span class="va">object</span>,
  max.order <span class="op">=</span> <span class="fl">2</span>, sub.order <span class="op">=</span> <span class="cn">FALSE</span>, conservative <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>object</dt>
<dd><p>An object of class <code>(rfsrc, grow)</code> or <code>(rfsrc,
	    forest).</code></p></dd>
<dt>max.order</dt>
<dd><p>Non-negative integer specifying the target number
    of order depths.  Default is to return the first and second order
    depths.  Used to identify predictive variables.  Setting
    <span class="option">max.order=0</span> returns the first order depth for each
    variable by tree.  A side effect is that <span class="option">conservative</span> is
    automatically set to <code>FALSE</code>.</p></dd>
<dt>sub.order</dt>
<dd><p>Set this value to <code>TRUE</code> to return the
    minimal depth of each variable relative to another variable.
    Used to identify interrelationship between variables.  See
    details below.</p></dd>
<dt>conservative</dt>
<dd><p>If <code>TRUE</code>, the threshold value for selecting
    variables is calculated using a conservative marginal
    approximation to the minimal depth distribution (the method used
    in Ishwaran et al. 2010).  Otherwise, the minimal depth
    distribution is the tree-averaged distribution.  The latter method
    tends to give larger threshold values and discovers more
    variables, especially in high-dimensions.</p></dd>
<dt>...</dt>
<dd><p>Further arguments passed to or from other methods.</p></dd>
</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>The maximal subtree for a variable <em>x</em> is the largest subtree
  whose root node splits on <em>x</em>.  Thus, all parent nodes of
  <em>x</em>'s maximal subtree have nodes that split on variables other
  than <em>x</em>.  The largest maximal subtree possible is the root
  node.  In general, however, there can be more than one maximal
  subtree for a variable. A maximal subtree may also not exist if
  there are no splits on the variable.  See Ishwaran et al. (2010,
  2011) for details.</p>  
<p>The minimal depth of a maximal subtree (the first order depth)
  measures predictiveness of a variable <em>x</em>.  It equals the
  shortest distance (the depth) from the root node to the parent node
  of the maximal subtree (zero is the smallest value possible).  The
  smaller the minimal depth, the more impact <em>x</em> has on
  prediction. The mean of the minimal depth distribution is used as
  the threshold value for deciding whether a variable's minimal depth
  value is small enough for the variable to be classified as strong.</p>  
<p>The second order depth is the distance from the root node to the
  second closest maximal subtree of <em>x</em>.  To specify the target
  order depth, use the <code>max.order</code> option (e.g., setting
  <span class="option">max.order=2</span> returns the first and second order depths).
  Setting <span class="option">max.order=0</span> returns the first order depth for each
  variable for each tree.</p>  
<p>Set <span class="option">sub.order=TRUE</span> to obtain the minimal depth of a
  variable relative to another variable.  This returns a
  <code>p</code>x<code>p</code> matrix, where <code>p</code> is the number of variables,
  and entries (i,j) are the normalized relative minimal depth of a
  variable j within the maximal subtree for variable i, where
  normalization adjusts for the size of i's maximal subtree.  Entry
  (i,i) is the normalized minimal depth of i relative to the root
  node.  The matrix should be read by looking across rows (not down
  columns) and identifies interrelationship between variables.  Small
  (i,j) entries indicate interactions.  See
  <code class="command">find.interaction</code> for related details.</p>  
<p>For competing risk data, maximal subtree analyses are unconditional
  (i.e., they are non-event specific).</p>
    </div>
    <div id="value">
    <h2>Value</h2>
    <p>Invisibly, a list with the following components:</p>
<dl><dt>order</dt>
<dd><p>Order depths for a given variable up to <code>max.order</code>
    averaged over a tree and the forest.  Matrix of dimension
    <code>p</code>x<code>max.order</code>.  If <span class="option">max.order=0</span>, a matrix of
    <code>p</code>x<code>ntree</code> is returned containing the first order depth
    for each variable by tree.</p></dd>
<dt>count</dt>
<dd><p>Averaged number of  maximal subtrees, normalized by
    the size of a tree, for each variable.</p></dd>
<dt>nodes.at.depth</dt>
<dd><p>Number of non-terminal nodes by depth for each tree.</p></dd>
<dt>sub.order</dt>
<dd><p>Average minimal depth of a variable relative to another
    variable.  Can be <code>NULL</code>.</p></dd>
<dt>threshold</dt>
<dd><p>Threshold value (the mean minimal depth) used to
    select variables.</p></dd>
<dt>threshold.1se</dt>
<dd><p>Mean minimal depth plus one standard error.</p></dd>
<dt>topvars</dt>
<dd><p>Character vector of names of the final selected
    variables.</p></dd>
<dt>topvars.1se</dt>
<dd><p>Character vector of names of the final selected
    variables using the 1se threshold rule.</p></dd>
<dt>percentile</dt>
<dd><p>Minimal depth percentile for each variable.</p></dd>
<dt>density</dt>
<dd><p>Estimated minimal depth density.</p></dd>
<dt>second.order.threshold</dt>
<dd><p>Threshold for second order depth.</p></dd>
</dl></div>
    <div id="author">
    <h2>Author</h2>
    <p>Hemant Ishwaran and Udaya B. Kogalur</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Ishwaran H., Kogalur U.B., Gorodeski E.Z, Minn A.J. and 
  Lauer M.S. (2010).  High-dimensional variable selection for survival
  data.  <em>J. Amer. Statist. Assoc.</em>, 105:205-217.</p>  
<p>Ishwaran H., Kogalur U.B., Chen X. and Minn A.J. (2011).  Random
  survival forests for high-dimensional data. <em>Statist. Anal. Data
    Mining</em>, 4:115-132.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code class="command"><a href="holdout.vimp.rfsrc.html">holdout.vimp.rfsrc</a></code>,
  <code class="command"><a href="var.select.rfsrc.html">var.select.rfsrc</a></code>,
  <code class="command"><a href="vimp.rfsrc.html">vimp.rfsrc</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="co"># \donttest{</span>
<span class="co">## ------------------------------------------------------------</span>
<span class="co">## survival analysis</span>
<span class="co">## first and second order depths for all variables</span>
<span class="co">## ------------------------------------------------------------</span>

<span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">veteran</span>, package <span class="op">=</span> <span class="st">"randomForestSRC"</span><span class="op">)</span>
<span class="va">v.obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="rfsrc.html">rfsrc</a></span><span class="op">(</span><span class="fu">Surv</span><span class="op">(</span><span class="va">time</span>, <span class="va">status</span><span class="op">)</span> <span class="op">~</span> <span class="va">.</span> , data <span class="op">=</span> <span class="va">veteran</span><span class="op">)</span>
<span class="va">v.max</span> <span class="op">&lt;-</span> <span class="fu">max.subtree</span><span class="op">(</span><span class="va">v.obj</span><span class="op">)</span>

<span class="co"># first and second order depths</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">v.max</span><span class="op">$</span><span class="va">order</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span>

<span class="co"># the minimal depth is the first order depth</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">v.max</span><span class="op">$</span><span class="va">order</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span>

<span class="co"># strong variables have minimal depth less than or equal</span>
<span class="co"># to the following threshold</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">v.max</span><span class="op">$</span><span class="va">threshold</span><span class="op">)</span>

<span class="co"># this corresponds to the set of variables</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">v.max</span><span class="op">$</span><span class="va">topvars</span><span class="op">)</span>

<span class="co">## ------------------------------------------------------------</span>
<span class="co">## regression analysis</span>
<span class="co">## try different levels of conservativeness</span>
<span class="co">## ------------------------------------------------------------</span>

<span class="va">mtcars.obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="rfsrc.html">rfsrc</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span>
<span class="fu">max.subtree</span><span class="op">(</span><span class="va">mtcars.obj</span><span class="op">)</span><span class="op">$</span><span class="va">topvars</span>
<span class="fu">max.subtree</span><span class="op">(</span><span class="va">mtcars.obj</span>, conservative <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">$</span><span class="va">topvars</span>
<span class="co"># }</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://www.luminwin.net" class="external-link">Min Lu</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer></div>

  


  

  </body></html>

