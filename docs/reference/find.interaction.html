<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Find Interactions Between Pairs of Variables — find.interaction • Random Forests for Survival, Regression, and Classification</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Find Interactions Between Pairs of Variables — find.interaction" />
<meta property="og:description" content="Find pairwise interactions between variables." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-000000-01"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-000000-01');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Random Forests for Survival, Regression, and Classification</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Development version">2.11.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/rfsrc-introduction.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/getstarted.html">Getting Started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/rfsrc-introduction.html">Introduction</a>
    </li>
    <li>
      <a href="../articles/regression.html">Regression problem</a>
    </li>
    <li>
      <a href="../articles/classification.html">Classification problem</a>
    </li>
    <li>
      <a href="../articles/survival.html">Survival problem</a>
    </li>
    <li>
      <a href="../articles/rfsrc-subsample.html">Subsampling Inference for Variable Importance</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Manual</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="https://github.com/kogalur/randomForestSRC/issues">Bug Reporting</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/kogalur/randomForestSRC/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Find Interactions Between Pairs of Variables</h1>
    
    <div class="hidden name"><code>find.interaction.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Find pairwise interactions between variables.</p>
    </div>

    <pre class="usage"><span class='co'># S3 method for rfsrc</span>
<span class='fu'>find.interaction</span><span class='op'>(</span><span class='va'>object</span>, <span class='va'>xvar.names</span>, <span class='va'>cause</span>, <span class='va'>m.target</span>,
  importance <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"permute"</span>, <span class='st'>"random"</span>, <span class='st'>"anti"</span>,
                 <span class='st'>"permute.ensemble"</span>, <span class='st'>"random.ensemble"</span>, <span class='st'>"anti.ensemble"</span><span class='op'>)</span>,
  method <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"maxsubtree"</span>, <span class='st'>"vimp"</span><span class='op'>)</span>, sorted <span class='op'>=</span> <span class='cn'>TRUE</span>, <span class='va'>nvar</span>, nrep <span class='op'>=</span> <span class='fl'>1</span>,
  na.action <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"na.omit"</span>, <span class='st'>"na.impute"</span><span class='op'>)</span>,
  seed <span class='op'>=</span> <span class='cn'>NULL</span>, do.trace <span class='op'>=</span> <span class='cn'>FALSE</span>, verbose <span class='op'>=</span> <span class='cn'>TRUE</span>, <span class='va'>...</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>object</th>
      <td><p>An object of class <code>(rfsrc, grow)</code> or
    <code>(rfsrc, forest)</code>.</p></td>
    </tr>
    <tr>
      <th>xvar.names</th>
      <td><p>Character vector of names of target x-variables.
    Default is to use all variables.</p></td>
    </tr>
    <tr>
      <th>cause</th>
      <td><p>For competing risk families, integer value between 1
    and <code>J</code> indicating the event of interest, where <code>J</code> is
    the number of event types. The default is to use the first event
    type.</p></td>
    </tr>
    <tr>
      <th>m.target</th>
      <td><p>Character value for multivariate families
    specifying the target outcome to be used.  If left unspecified, the
    algorithm will choose a default target.</p></td>
    </tr>
    <tr>
      <th>importance</th>
      <td><p>Type of variable importance (VIMP). See
    <code class='command'>rfsrc</code> for details.</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>Method of analysis: maximal subtree or VIMP.  See details
    below.</p></td>
    </tr>
    <tr>
      <th>sorted</th>
      <td><p>Should variables be sorted by VIMP?  Does not apply for
    competing risks.</p></td>
    </tr>
    <tr>
      <th>nvar</th>
      <td><p>Number of variables to be used.</p></td>
    </tr>
    <tr>
      <th>nrep</th>
      <td><p>Number of Monte Carlo replicates when <span class="option">method="vimp"</span>.</p></td>
    </tr>
    <tr>
      <th>na.action</th>
      <td><p>Action to be taken if the data contains <code>NA</code>
    values.  Applies only when <span class="option">method="vimp"</span>.</p></td>
    </tr>
    <tr>
      <th>seed</th>
      <td><p>Seed for random number generator.  Must be a negative
    integer.</p></td>
    </tr>
    <tr>
      <th>do.trace</th>
      <td><p>Number of seconds between updates to the user on
    approximate time to completion.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>Set to <code>TRUE</code> for verbose output.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Further arguments passed to or from other methods.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Using a previously grown forest, identify pairwise interactions for
  all pairs of variables from a specified list.  There are two
  distinct approaches specified by the option <span class="option">method</span>.</p>
<p></p><ol>
<li><p><span class="option">method="maxsubtree"</span></p>
<p>This invokes a maximal subtree analysis.  In this case, a matrix
    is returned where entries [i][i] are the normalized minimal depth
    of variable [i] relative to the root node (normalized wrt the
    size of the tree) and entries [i][j] indicate the normalized
    minimal depth of a variable [j] wrt the maximal subtree for
    variable [i] (normalized wrt the size of [i]'s maximal subtree).
    Smaller [i][i] entries indicate predictive variables.  Small
    [i][j] entries having small [i][i] entries are a sign of an
    interaction between variable i and j (note: the user should scan
    rows, not columns, for small entries).  See Ishwaran et
    al. (2010, 2011) for more details.</p></li>
<li><p><span class="option">method="vimp"</span></p>
<p>This invokes a joint-VIMP approach.  Two variables are paired and
    their paired VIMP calculated (refered to as 'Paired' importance).
    The VIMP for each separate variable is also calculated.  The sum
    of these two values is refered to as 'Additive' importance.  A
    large positive or negative difference between 'Paired' and
    'Additive' indicates an association worth pursuing if the
    univariate VIMP for each of the paired-variables is reasonably
    large.  See Ishwaran (2007) for more details.</p></li>
</ol>

<p>Computations might be slow depending upon the size of the data
  and the forest.  In such cases, consider setting <span class="option">nvar</span> to a
  smaller number.  If <span class="option">method="maxsubtree"</span>, consider using a
  smaller number of trees in the original grow call.</p>
<p>If <span class="option">nrep</span> is greater than 1, the analysis is repeated
  <code>nrep</code> times and results averaged over the replications
  (applies only when <span class="option">method="vimp"</span>).</p>
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Invisibly, the interaction table (a list for competing risk data)
  or the maximal subtree matrix.</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Hemant Ishwaran and Udaya B. Kogalur</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Ishwaran H. (2007).  Variable importance in binary regression
  trees and forests,  <em>Electronic J. Statist.</em>, 1:519-537.</p>
<p>Ishwaran H., Kogalur U.B., Gorodeski E.Z, Minn A.J. and
  Lauer M.S. (2010).  High-dimensional variable selection for survival
  data.  <em>J. Amer. Statist. Assoc.</em>, 105:205-217.</p>
<p>Ishwaran H., Kogalur U.B., Chen X. and Minn A.J. (2011).  Random
  survival forests for high-dimensional data. <em>Statist. Anal. Data
    Mining</em>, 4:115-132.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code class='command'>holdout.vimp.rfsrc</code>,
  <code class='command'>max.subtree.rfsrc</code>,
  <code class='command'>var.select.rfsrc</code>,
  <code class='command'>vimp.rfsrc</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># \donttest{</span>
<span class='co'>## ------------------------------------------------------------</span>
<span class='co'>## find interactions, survival setting</span>
<span class='co'>## ------------------------------------------------------------</span>

<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>pbc</span>, package <span class='op'>=</span> <span class='st'>"randomForestSRC"</span><span class='op'>)</span>
<span class='va'>pbc.obj</span> <span class='op'>&lt;-</span> <span class='fu'>rfsrc</span><span class='op'>(</span><span class='fu'>Surv</span><span class='op'>(</span><span class='va'>days</span>,<span class='va'>status</span><span class='op'>)</span> <span class='op'>~</span> <span class='va'>.</span>, <span class='va'>pbc</span>, importance <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='fu'>find.interaction</span><span class='op'>(</span><span class='va'>pbc.obj</span>, method <span class='op'>=</span> <span class='st'>"vimp"</span>, nvar <span class='op'>=</span> <span class='fl'>8</span><span class='op'>)</span>

<span class='co'>## ------------------------------------------------------------</span>
<span class='co'>## find interactions, competing risks</span>
<span class='co'>## ------------------------------------------------------------</span>

<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>wihs</span>, package <span class='op'>=</span> <span class='st'>"randomForestSRC"</span><span class='op'>)</span>
<span class='va'>wihs.obj</span> <span class='op'>&lt;-</span> <span class='fu'>rfsrc</span><span class='op'>(</span><span class='fu'>Surv</span><span class='op'>(</span><span class='va'>time</span>, <span class='va'>status</span><span class='op'>)</span> <span class='op'>~</span> <span class='va'>.</span>, <span class='va'>wihs</span>, nsplit <span class='op'>=</span> <span class='fl'>3</span>, ntree <span class='op'>=</span> <span class='fl'>100</span>,
                       importance <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='fu'>find.interaction</span><span class='op'>(</span><span class='va'>wihs.obj</span><span class='op'>)</span>
<span class='fu'>find.interaction</span><span class='op'>(</span><span class='va'>wihs.obj</span>, method <span class='op'>=</span> <span class='st'>"vimp"</span><span class='op'>)</span>

<span class='co'>## ------------------------------------------------------------</span>
<span class='co'>## find interactions, regression setting</span>
<span class='co'>## ------------------------------------------------------------</span>

<span class='va'>airq.obj</span> <span class='op'>&lt;-</span> <span class='fu'>rfsrc</span><span class='op'>(</span><span class='va'>Ozone</span> <span class='op'>~</span> <span class='va'>.</span>, data <span class='op'>=</span> <span class='va'>airquality</span>, importance <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='fu'>find.interaction</span><span class='op'>(</span><span class='va'>airq.obj</span>, method <span class='op'>=</span> <span class='st'>"vimp"</span>, nrep <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span>
<span class='fu'>find.interaction</span><span class='op'>(</span><span class='va'>airq.obj</span><span class='op'>)</span>

<span class='co'>## ------------------------------------------------------------</span>
<span class='co'>## find interactions, classification setting</span>
<span class='co'>## ------------------------------------------------------------</span>

<span class='va'>iris.obj</span> <span class='op'>&lt;-</span> <span class='fu'>rfsrc</span><span class='op'>(</span><span class='va'>Species</span> <span class='op'>~</span><span class='va'>.</span>, data <span class='op'>=</span> <span class='va'>iris</span>, importance <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='fu'>find.interaction</span><span class='op'>(</span><span class='va'>iris.obj</span>, method <span class='op'>=</span> <span class='st'>"vimp"</span>, nrep <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span>
<span class='fu'>find.interaction</span><span class='op'>(</span><span class='va'>iris.obj</span><span class='op'>)</span>

<span class='co'>## ------------------------------------------------------------</span>
<span class='co'>## interactions for multivariate mixed forests</span>
<span class='co'>## ------------------------------------------------------------</span>

<span class='va'>mtcars2</span> <span class='op'>&lt;-</span> <span class='va'>mtcars</span>
<span class='va'>mtcars2</span><span class='op'>$</span><span class='va'>cyl</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>mtcars2</span><span class='op'>$</span><span class='va'>cyl</span><span class='op'>)</span>
<span class='va'>mtcars2</span><span class='op'>$</span><span class='va'>carb</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>mtcars2</span><span class='op'>$</span><span class='va'>carb</span>, ordered <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='va'>mv.obj</span> <span class='op'>&lt;-</span> <span class='fu'>rfsrc</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span><span class='op'>(</span><span class='va'>carb</span>, <span class='va'>mpg</span>, <span class='va'>cyl</span><span class='op'>)</span> <span class='op'>~</span><span class='va'>.</span>, data <span class='op'>=</span> <span class='va'>mtcars2</span>, importance <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='fu'>find.interaction</span><span class='op'>(</span><span class='va'>mv.obj</span>, method <span class='op'>=</span> <span class='st'>"vimp"</span>, outcome.target <span class='op'>=</span> <span class='st'>"carb"</span><span class='op'>)</span>
<span class='fu'>find.interaction</span><span class='op'>(</span><span class='va'>mv.obj</span>, method <span class='op'>=</span> <span class='st'>"vimp"</span>, outcome.target <span class='op'>=</span> <span class='st'>"mpg"</span><span class='op'>)</span>
<span class='fu'>find.interaction</span><span class='op'>(</span><span class='va'>mv.obj</span>, method <span class='op'>=</span> <span class='st'>"vimp"</span>, outcome.target <span class='op'>=</span> <span class='st'>"cyl"</span><span class='op'>)</span>
<span class='co'># }</span>
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Min Lu.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


